<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head> 

<body>

 	<h2>Sync Configuration With Cheyenne</h2> 
	
	<button onclick="sync()">Sync With Cheyenne!</button>
	<br>
	<br>
	<button id="test" onclick="makeCorsRequest()">Cart Details</button>
	<br>
	<br>
	
	<div id="demo">
	</div>
	
 	<script type='text/javascript'>
		
		function sync() {
			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					document.getElementById("demo").innerHTML = this.responseText;
				}
			};
			
			xhttp.open("GET", "https://10.8.93.189:8443/v1/ede/channel/recommendations", true);
			xhttp.send();
		}
		
// 		function jsonCallback(json) {
// 			alert();
// 			console.log(json);
// 		}
		
		function createCORSRequest(method, url) {
			alert('inside createCORSRequest');
			var xhr = new XMLHttpRequest();
			xhr.open(method, url, true);
			alert(xhr);
			console.log(xhr);
		}
		
		function getTitle(text) {
			return text.match('<title>(.*)?</title>')[1];
		}
		
		function makeCorsRequest() {
			alert('inside makeCorsRequest');
			// This is a sample server that supports CORS.
			var url = 'https://prometheus-asgard.myshopify.com/cart.json';
			
			var xhr = createCORSRequest('GET', url);
			if (!xhr) {
				alert('inside xhr is not');
				alert('CORS not supported');
				return;
			}
			
			// Response handlers.
			xhr.onload = function() {
				alert('inside onload');
				var text = xhr.responseText;
				var title = getTitle(text);
				alert('Response from CORS request to ' + url + ': ' + title);
			};
			
			xhr.onerror = function() {
				alert('inside on error');
				alert('Woops, there was an error making the request.');
			};
			
			xhr.send(null);
		}
	</script>
</body>
</html> 
